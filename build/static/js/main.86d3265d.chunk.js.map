{"version":3,"sources":["components/Number.js","components/Numbers.js","components/Search.js","components/PersonForm.js","services/numberServices.js","components/Notification.js","App.js","index.js"],"names":["Number","person","deletePerson","name","number","onClick","Numbers","persons","map","key","Search","filterName","handler","value","onChange","PersonForm","newName","newNumber","handlers","onSubmit","submit","type","baseUrl","axios","get","then","res","data","newObject","post","id","put","delete","Notification","message","isError","className","App","useState","setPersons","setNewName","setNewNumber","setFilterName","setMessage","setIsError","useEffect","numberServices","catch","err","personsToShow","filter","p","match","RegExp","e","target","preventDefault","oldId","newNameObject","some","window","confirm","changedPerson","prevPersons","n","setTimeout","newPerson","console","log","response","status","error","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.86d3265d.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Number = ({ person, deletePerson }) => {\r\n  return (\r\n    <p>{person.name} {person.number} <button onClick={() => deletePerson(person)}>delete</button></p>\r\n  )\r\n}\r\n\r\nexport default Number","import React from 'react'\r\nimport Number from \"./Number\";\r\n\r\nconst Numbers = ({persons, deletePerson}) => {\r\n  return (\r\n    <>\r\n      {persons.map(person => (\r\n        <Number key={person.name} person={person} deletePerson={deletePerson} />\r\n      ))}\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Numbers","import React from 'react'\r\n\r\nconst Search = ({filterName, handler}) => {\r\n  return (\r\n    <div>\r\n      filter shown with <input value={filterName} onChange={handler} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Search","import React from 'react'\r\n\r\nconst PersonForm = ({newName, newNumber, handlers}) => {\r\n  return (\r\n    <form onSubmit={handlers.submit}>\r\n        <div>\r\n          name: <input onChange={handlers.name} value={newName} />\r\n        </div>\r\n        <div>\r\n          number: <input onChange={handlers.number} value={newNumber} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n  )\r\n}\r\n\r\nexport default PersonForm\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const req = axios.get(baseUrl)\r\n  return req.then(res => res.data)\r\n}\r\n\r\nconst create = newObject => {\r\n  const req = axios.post(baseUrl, newObject)\r\n  return req.then(res => res.data)\r\n}\r\n\r\nconst update = (id, newObject) => {\r\n  const req = axios.put(`${baseUrl}/${id}`, newObject)\r\n  return req.then(res => res.data)\r\n}\r\n\r\nconst remove = id => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { getAll, create, update, remove }\r\n","import React from 'react'\r\n\r\nconst Notification = ({ message, isError }) => {\r\n  if (message === null) return null;\r\n\r\n  return (\r\n    <div className={isError ? \"error\" : \"success\"}>\r\n      { message }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Notification\r\n","import React, { useState, useEffect } from 'react'\r\nimport Numbers from './components/Numbers'\r\nimport Search from './components/Search'\r\nimport PersonForm from './components/PersonForm'\r\nimport numberServices from './services/numberServices'\r\nimport Notification from './components/Notification'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filterName, setFilterName] = useState('')\r\n  const [message, setMessage] = useState(null)\r\n  const [isError, setIsError] = useState(false)\r\n\r\n  useEffect(() => {\r\n    numberServices\r\n      .getAll()\r\n      .then(data => setPersons(data))\r\n      .catch(err => {\r\n        setIsError(true)\r\n        setMessage(`Can't fetch persons. ${err}`)\r\n      })\r\n  }, [])\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n\r\n    const newNameObject = {\r\n      name: newName,\r\n      number: newNumber\r\n    }\r\n\r\n    let oldId\r\n\r\n    if (\r\n      persons.some(p => {\r\n        oldId = p.id\r\n        return p.name === newNameObject.name\r\n      })\r\n    ) {\r\n      const replace = window.confirm(\r\n        `${newNameObject.name} is already added to the phonebook, replace the old number with a new one?`\r\n      )\r\n\r\n      if (replace) {\r\n        numberServices\r\n          .update(oldId, newNameObject)\r\n          .then(changedPerson =>\r\n            setPersons(prevPersons => [\r\n              ...prevPersons.filter(n => n.id !== oldId),\r\n              changedPerson\r\n            ])\r\n          )\r\n          .catch(err => {\r\n            setIsError(true)\r\n            setMessage(`Failed to update person. ${err}`)\r\n            setTimeout(() => {\r\n              setMessage(null)\r\n            }, 5000)\r\n          })\r\n        setIsError(false)\r\n        setMessage(`Changed ${newNameObject.name}'s number`)\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n      }\r\n    } else {\r\n      numberServices\r\n        .create(newNameObject)\r\n        .then(newPerson =>\r\n          setPersons(prevPersons => [...prevPersons, newPerson])\r\n        )\r\n        .catch(err => {\r\n          setIsError(true)\r\n          console.log(err.response)\r\n          if (err.response.status === 400) {\r\n            setMessage(err.response.data.error)\r\n          } else {\r\n            setMessage(`Failed to add ${newNameObject.name}. ${err}`)\r\n          }\r\n          setTimeout(() => {\r\n            setMessage(null)\r\n          }, 5000)\r\n        })\r\n      setIsError(false)\r\n      setMessage(`Added ${newNameObject.name}`)\r\n      setTimeout(() => {\r\n        setMessage(null)\r\n      }, 5000)\r\n    }\r\n\r\n    setNewName('')\r\n    setNewNumber('')\r\n  }\r\n\r\n  const deletePerson = ({ id, name }) => {\r\n    const getsDeleted = window.confirm(`Delete ${name}?`)\r\n    if (getsDeleted) {\r\n      numberServices.remove(id).catch(err => {\r\n        console.log(err)\r\n        setIsError(true)\r\n        setMessage(\r\n          `Information of ${name} has already been removed from server`\r\n        )\r\n        setTimeout(() => {\r\n          setMessage(null)\r\n        }, 5000)\r\n        setPersons(persons.filter(n => n.id !== id))\r\n      })\r\n      setPersons(persons.filter(n => n.id !== id))\r\n    }\r\n  }\r\n\r\n  const handleNameChange = e => {\r\n    setNewName(e.target.value)\r\n  }\r\n\r\n  const handleNumberInput = e => {\r\n    setNewNumber(e.target.value)\r\n  }\r\n\r\n  const handleNameSearch = e => {\r\n    setFilterName(e.target.value)\r\n  }\r\n\r\n  const personsToShow = filterName\r\n    ? persons.filter(p => p.name.match(new RegExp(filterName, 'gi')))\r\n    : persons\r\n\r\n  const handlers = {\r\n    name: handleNameChange,\r\n    number: handleNumberInput,\r\n    submit: handleSubmit\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} isError={isError} />\r\n      <Search filterName={filterName} handler={handleNameSearch} />\r\n      <h2>add a new</h2>\r\n      <PersonForm newName={newName} newNumber={newNumber} handlers={handlers} />\r\n      <h2>Numbers</h2>\r\n      <Numbers deletePerson={deletePerson} persons={personsToShow} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport \"./index.css\";\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}